# Writing a Time Series Database from Scratch

> 译注：原文地址：https://fabxc.org/tsdb/，由 Prometheus 核心开发者 Fabian Reinartz 写作于2017-04-20。
> 由于本文篇幅较长，就不做逐字逐句地翻译了，挑选其中重要精华部分翻译。

Prometheus 的存储层在过去已经展现出了出色的性能，单机可以摄入高达每秒一百万的样本和数百万的时序，而只需占用较小的磁盘空间。尽管目前的存储层已经工作得很好了，我还是提出了一个新设计的存储子系统来弥补现有方案的缺陷以及应对更高数量级的数据规模。

## 问题，问题，问题空间

首先，快速概述下我们要实现的东西及其引发的关键问题。我们来看下 Prometheus 目前的方案，它哪些地方做得好，还有哪些问题是要用新的设计来解决的。

### 时序数据

### 垂直和水平

#### 目前的解决方案

### 序列搅动

#### 目前的解决方案

### 资源消耗

## 重新开始

### V3 —— 宏观设计

#### 许多小型数据库

##### mmap

#### 压缩

#### 保留

### 索引

#### 组合标签

## 基准测试

## 结论

